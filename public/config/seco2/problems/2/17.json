{
  "type": "problem",
  "title": "Wordles",
  "extendData": "",
  "contentType": 1,
  "content": "<!-- å¼•å…¥ Google Fonts ä¼˜åŒ–æ•°å­—å’Œå­—æ¯æ˜¾ç¤º -->\n<link href=\"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@700&display=swap\" rel=\"stylesheet\">\n\n<style>\n    /* ================= ä½œç”¨åŸŸéš”ç¦» ================= \n       ä½¿ç”¨ .meta2-app åŒ…è£¹ï¼Œé˜²æ­¢æ±¡æŸ“å…¨å±€ CSS\n    */\n    .meta2-app {\n        font-family: 'Arial', sans-serif;\n        /* ä¿æŒèƒŒæ™¯é€æ˜ï¼Œæ˜¾ç¤ºç½‘é¡µåŸæœ¬çš„ä¸»é¢˜è‰² */\n        width: 100%;\n        display: flex;\n        justify-content: center;\n        padding-top: 20px;\n        padding-bottom: 40px;\n    }\n\n    /* æ¸¸æˆä¸»å®¹å™¨ï¼šç±»ä¼¼ä¸€å¼ ç™½çº¸å¡ç‰‡æµ®åœ¨èƒŒæ™¯ä¸Š */\n    .meta2-container {\n        background-color: rgba(255, 255, 255, 0.96);\n        border-radius: 16px;\n        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);\n        width: 100%;\n        max-width: 900px; /* ç”µè„‘ç«¯å®½åº¦é™åˆ¶ */\n        padding: 30px;\n        box-sizing: border-box;\n        min-height: 650px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        position: relative;\n    }\n\n    /* Wordle é…è‰²å˜é‡ */\n    :root {\n        --w-green: #6aaa64;\n        --w-yellow: #c9b458;\n        --w-gray: #787c7e;\n        --w-light-red: #ffcccc; \n        --w-deep-red: #d32f2f;\n    }\n\n    /* æ ‡é¢˜æ ·å¼ */\n    .meta2-header h1 {\n        margin: 0 0 20px 0;\n        color: #333;\n        font-size: 2rem;\n        text-align: center;\n        letter-spacing: 2px;\n    }\n\n    /* ================= èœå•é¡µæ ·å¼ ================= */\n    .page-section { display: none; width: 100%; flex-direction: column; align-items: center; }\n    .page-section.active { display: flex; animation: fadeIn 0.3s ease; }\n\n    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }\n\n    /* å…³å¡ç½‘æ ¼ - å“åº”å¼æ ¸å¿ƒ */\n    .level-grid {\n        display: grid;\n        /* ç”µè„‘ä¸Šåˆ—å®½å›ºå®šï¼Œè‡ªåŠ¨å¡«æ»¡ï¼›æ‰‹æœºä¸Šè‡ªåŠ¨æ¢è¡Œ */\n        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));\n        gap: 20px;\n        width: 100%;\n        padding: 10px;\n    }\n\n    .level-card {\n        background: white;\n        border: 2px solid #e0e0e0;\n        border-radius: 12px;\n        padding: 20px;\n        text-align: center;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        position: relative;\n        overflow: hidden;\n    }\n    \n    .level-card:hover {\n        transform: translateY(-5px);\n        box-shadow: 0 5px 15px rgba(0,0,0,0.1);\n        border-color: #999;\n    }\n\n    .level-card.completed {\n        background-color: #f0fff4;\n        border-color: var(--w-green);\n    }\n    .level-card.completed h3 { color: var(--w-green); }\n\n    /* ================= æ¸¸æˆé¡µæ ·å¼ ================= */\n    .game-header {\n        width: 100%;\n        max-width: 600px;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 15px;\n        border-bottom: 2px solid #eee;\n        padding-bottom: 10px;\n    }\n\n    .game-info-bar {\n        width: 100%;\n        max-width: 600px;\n        display: flex;\n        justify-content: space-between;\n        font-size: 1rem;\n        color: #555;\n        margin-bottom: 10px;\n        background: #f5f5f5;\n        padding: 8px 15px;\n        border-radius: 8px;\n    }\n\n    .status-badge {\n        font-family: 'Roboto Mono', monospace;\n        font-weight: bold;\n        color: #333;\n    }\n\n    /* æ£‹ç›˜åŒºåŸŸ */\n    .board-wrapper {\n        flex-grow: 1;\n        overflow-y: auto;\n        width: 100%;\n        display: flex;\n        justify-content: center;\n        margin-bottom: 15px;\n        padding: 5px;\n    }\n\n    .board {\n        display: grid;\n        gap: 6px;\n        padding-bottom: 10px;\n    }\n\n    .row {\n        display: grid;\n        gap: 6px;\n    }\n\n    .tile {\n        width: 52px; height: 52px;\n        border: 2px solid #d3d6da;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 28px;\n        font-weight: bold;\n        text-transform: uppercase;\n        background-color: white;\n        user-select: none;\n        color: #333;\n    }\n\n    /* é¢œè‰²çŠ¶æ€ */\n    .tile.green { background-color: var(--w-green); color: white; border-color: var(--w-green); }\n    .tile.yellow { background-color: var(--w-yellow); color: white; border-color: var(--w-yellow); }\n    .tile.gray { background-color: var(--w-gray); color: white; border-color: var(--w-gray); }\n\n    /* ç‰¹æ®Šåˆ—é«˜äº® */\n    .tile.col-light-red { background-color: var(--w-light-red); border-color: #ffaaaa; color: #555; }\n    .tile.col-deep-red { background-color: var(--w-deep-red); border-color: #b71c1c; color: white; }\n    .tile.col-deep-red.green, .tile.col-deep-red.yellow { border: 4px solid #8b0000; }\n\n    /* é”®ç›˜åŒºåŸŸ */\n    .keyboard {\n        width: 100%;\n        max-width: 600px;\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n    }\n\n    .key-row {\n        display: flex;\n        justify-content: center;\n        gap: 6px;\n        width: 100%;\n    }\n\n    .key {\n        font-family: inherit;\n        font-weight: bold;\n        border: 0;\n        padding: 0;\n        margin: 0;\n        height: 58px;\n        border-radius: 4px;\n        cursor: pointer;\n        user-select: none;\n        background-color: #d3d6da;\n        color: #1a1a1b;\n        flex: 1;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-transform: uppercase;\n        font-size: 1.2rem;\n    }\n    \n    .key:hover { opacity: 0.9; }\n    .key:active { background-color: #bbb; transform: scale(0.95); }\n    .key.wide { flex: 1.5; font-size: 1rem; }\n    .key.space { flex: 3; font-size: 1rem; }\n\n    /* é‡ç½®åŒºåŸŸ (é»˜è®¤éšè—) */\n    #restart-area {\n        width: 100%;\n        max-width: 600px;\n        text-align: center;\n        padding: 20px;\n        background: #fff0f0;\n        border: 1px solid #ffcccc;\n        border-radius: 8px;\n        margin-top: 20px;\n    }\n\n    /* æŒ‰é’®é€šç”¨æ ·å¼ */\n    .btn-action {\n        padding: 8px 16px;\n        border-radius: 6px;\n        border: none;\n        cursor: pointer;\n        font-weight: bold;\n        transition: 0.2s;\n        text-decoration: none;\n        display: inline-block;\n        font-size: 14px;\n    }\n    .btn-secondary { background: #666; color: white; }\n    .btn-secondary:hover { background: #444; }\n    .btn-primary { background: var(--w-green); color: white; }\n    .btn-primary:hover { background: #55854e; }\n    .btn-danger { background: var(--w-deep-red); color: white; }\n    .btn-danger:hover { background: #b71c1c; }\n\n    /* å¼¹çª—æ ·å¼ */\n    .overlay {\n        position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n        background: rgba(0,0,0,0.6); display: none; z-index: 999;\n        backdrop-filter: blur(2px);\n    }\n    .modal {\n        position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);\n        background: white; padding: 30px; border-radius: 12px;\n        text-align: center; display: none; z-index: 1000;\n        box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n        width: 85%; max-width: 400px;\n    }\n    .modal h3 { margin-top: 0; color: #333; }\n    \n    #loading-overlay { display: none; justify-content: center; align-items: center; color: white; font-size: 1.5rem; flex-direction: column; gap: 15px; }\n\n    /* æ‰‹æœºç«¯é€‚é…è°ƒæ•´ */\n    @media (max-width: 600px) {\n        .meta2-container { padding: 15px; min-height: auto; border-radius: 0; }\n        .tile { width: 42px; height: 42px; font-size: 22px; }\n        .key { height: 48px; font-size: 1rem; }\n        .board { gap: 4px; }\n        .row { gap: 4px; }\n    }\n</style>\n\n<div class=\"meta2-app\">\n    <div class=\"meta2-container\">\n        \n        <!-- 1. å…³å¡èœå• -->\n        <div id=\"page-menu\" class=\"page-section active\">\n            <div class=\"meta2-header\">\n                <h1>WORDLES</h1>\n            </div>\n            \n            <div id=\"level-list\" class=\"level-grid\">\n                <!-- JS åŠ¨æ€ç”Ÿæˆ -->\n                <div style=\"text-align:center; width:100%; color:#999; grid-column: 1/-1;\">æ­£åœ¨åŠ è½½åˆ—è¡¨...</div>\n            </div>\n\n            <div style=\"margin-top: 30px; padding: 15px; background: #f9f9f9; border-radius: 8px; font-size: 0.9em; color: #555; max-width: 600px;\">\n                <p><strong>è§„åˆ™è¯´æ˜ï¼š</strong></p>\n                <ul style=\"text-align: left; padding-left: 20px; line-height: 1.6;\">\n                    <li>æ¯å…³æœ‰ 6 è¡ŒçŒœæµ‹ç©ºé—´</li>\n                    <li><strong>æ¸¸ç©æœºä¼š</strong>ï¼šæ¯å…³ç‹¬ç«‹ 5 æ¬¡ã€‚å¦‚æœ 6 è¡ŒçŒœå®Œæœªé€šå…³ï¼Œåˆ™æ¶ˆè€— 1 æ¬¡æ¸¸ç©æœºä¼šé‡ç½®æœ¬å…³ã€‚</li>\n                    <li>æ¶ˆè€—æç¤ºç‚¹å¯ä»¥ç»™<strong>æ‰€æœ‰å…³å¡</strong>å¢åŠ  5 æ¬¡æ¸¸ç©æœºä¼šã€‚</li>\n                </ul>\n            </div>\n        </div>\n\n        <!-- 2. æ¸¸æˆç•Œé¢ -->\n        <div id=\"page-game\" class=\"page-section\">\n            <div class=\"game-header\">\n                <button class=\"btn-action btn-secondary\" onclick=\"showMenu()\">Â« åˆ—è¡¨</button>\n                <h2 id=\"level-title\" style=\"margin:0; font-family: 'Roboto Mono', monospace;\">LEVEL ?</h2>\n                <button id=\"hint-btn\" class=\"btn-action btn-primary\" style=\"font-size: 0.9em;\">\n                    + æœºä¼š\n                </button>\n            </div>\n\n            <div class=\"game-info-bar\">\n                <div>å‰©ä½™æœºä¼š: <span id=\"attempts-display\" class=\"status-badge\">...</span></div>\n                <div>çŠ¶æ€: <span id=\"solve-status\" style=\"font-weight:bold;\">...</span></div>\n            </div>\n\n            <div class=\"board-wrapper\">\n                <div id=\"board\" class=\"board\">\n                    <!-- JS ç”Ÿæˆç½‘æ ¼ -->\n                </div>\n            </div>\n\n            <!-- é‡ç½®æŒ‰é’®åŒºåŸŸ (é»˜è®¤éšè—) -->\n            <div id=\"restart-area\" style=\"display: none;\">\n                <h3 style=\"color: var(--w-deep-red); margin-top: 0;\">çŒœæµ‹æ¬¡æ•°è€—å°½</h3>\n                <p style=\"color: #666; font-size: 0.9em; margin-bottom: 15px;\">æ£‹ç›˜å·²æ»¡ï¼Œæ— æ³•ç»§ç»­è¾“å…¥ã€‚</p>\n                <button class=\"btn-action btn-danger\" onclick=\"tryRestart()\" style=\"width: 100%; padding: 12px; font-size: 1.1rem;\">\n                    é‡ç©æœ¬å…³ (æ¶ˆè€—1æ¬¡æœºä¼š)\n                </button>\n            </div>\n\n            <div class=\"keyboard\" id=\"keyboard\">\n                <!-- JS ç”Ÿæˆé”®ç›˜ -->\n            </div>\n        </div>\n\n    </div>\n</div>\n\n<!-- å¼¹çª— -->\n<div id=\"overlay\" class=\"overlay\" onclick=\"/* ç‚¹å‡»èƒŒæ™¯ä¸å…³é—­ï¼Œå¼ºåˆ¶ç‚¹æŒ‰é’® */\"></div>\n<div id=\"modal\" class=\"modal\">\n    <h3 id=\"modal-title\">æç¤º</h3>\n    <p id=\"modal-msg\" style=\"margin: 20px 0; line-height: 1.5; color: #444; white-space: pre-line;\"></p>\n    <div id=\"modal-actions\" style=\"display: flex; gap: 15px; justify-content: center;\">\n        <!-- JS åŠ¨æ€æ’å…¥æŒ‰é’® -->\n        <button class=\"btn-action btn-secondary\" onclick=\"closeModal()\">å…³é—­</button>\n    </div>\n</div>\n\n<!-- åŠ è½½é®ç½© -->\n<div id=\"loading-overlay\" class=\"overlay\" style=\"z-index: 2000;\">\n    <div class=\"spinner\" style=\"border: 4px solid #f3f3f3; border-top: 4px solid #6aaa64; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite;\"></div>\n    <div style=\"margin-top: 15px;\">é€šè®¯ä¸­...</div>\n</div>\n\n<style>\n@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n@keyframes pop { 50% { transform: scale(1.1); } }\n</style>\n\n<script>\n    // ================= é…ç½®ä¸å˜é‡ =================\n    const apiUrl = \"{% url 'meta2_api' %}\";\n    const csrfToken = \"{{ csrf_token }}\";\n    const hintCost = 1;\n    const attemptsPerBuy = 5;\n    const maxRows = 6; // å›ºå®šæ¸¸æˆè¡Œæ•°ä¸Šé™\n\n    let currentLevelId = 0;\n    let maxLength = 5;\n    let livesLeft = 0; // å¯¹åº”åç«¯ attempts_left\n    let historyData = [];\n    let currentGuess = \"\";\n    \n    // çŠ¶æ€ä½\n    let isProcessing = false;\n    let isCompleted = false;\n    let isGameOver = false; // æ˜¯å¦è¡Œæ•°å·²æ»¡ä¸”å¤±è´¥\n\n    // ================= API å°è£… =================\n    async function apiCall(data) {\n        document.getElementById('loading-overlay').style.display = 'flex';\n        try {\n            const response = await fetch(apiUrl, { \n                method: 'POST', \n                headers: { 'Content-Type': 'application/json', 'X-CSRFToken': csrfToken }, \n                body: JSON.stringify(data) \n            });\n            const json = await response.json();\n            document.getElementById('loading-overlay').style.display = 'none';\n            return json;\n        } catch (error) {\n            document.getElementById('loading-overlay').style.display = 'none';\n            console.error('API Error:', error);\n            showModal(\"ç½‘ç»œé”™è¯¯\", \"æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åˆ·æ–°é¡µé¢ã€‚\");\n            return { success: false };\n        }\n    }\n\n    // ================= è¾…åŠ©å‡½æ•° =================\n    function isModalOpen() {\n        const modal = document.getElementById('modal');\n        return modal && modal.style.display === 'block';\n    }\n\n    function switchPage(pageId) {\n        document.querySelectorAll('.page-section').forEach(el => el.classList.remove('active'));\n        document.getElementById(pageId).classList.add('active');\n    }\n\n    // ================= æ ¸å¿ƒé€»è¾‘ =================\n\n    // 1. åˆå§‹åŒ–èœå•\n    async function initMenu() {\n        switchPage('page-menu');\n        \n        const res = await apiCall({ action: 'get_menu_status' });\n        if (!res.success) return;\n\n        const container = document.getElementById('level-list');\n        container.innerHTML = '';\n        \n        res.levels.forEach(lvl => {\n            const div = document.createElement('div');\n            div.className = `level-card ${lvl.completed ? 'completed' : ''}`;\n            const icon = lvl.completed ? 'â˜…' : (lvl.id);\n            const statusText = lvl.completed ? 'å·²å®Œæˆ' : 'è¿›è¡Œä¸­';\n            \n            div.innerHTML = `\n                <div style=\"font-size: 2rem; margin-bottom: 5px; font-weight:bold; color: ${lvl.completed ? 'var(--w-green)' : '#ccc'}\">${icon}</div>\n                <h3 style=\"margin:0; font-size: 1.1rem;\">Level ${lvl.id}</h3>\n                <div style=\"margin-top: 5px; font-size: 0.8rem; color: #666;\">${statusText}</div>\n            `;\n            div.onclick = () => loadLevel(lvl.id);\n            container.appendChild(div);\n        });\n    }\n\n    // 2. åŠ è½½å…³å¡\n    async function loadLevel(id) {\n        const res = await apiCall({ action: 'get_level_init', level_id: id });\n        if (!res.success) {\n            showModal(\"é”™è¯¯\", res.message || \"æ— æ³•åŠ è½½å…³å¡\");\n            return;\n        }\n\n        currentLevelId = id;\n        const config = res.config;\n        const state = res.state;\n        \n        maxLength = Math.max(config.lenA, config.lenB);\n        livesLeft = state.lives; // è·å–å‰©ä½™å‘½æ•°\n        historyData = state.history || [];\n        isCompleted = state.completed;\n        isGameOver = state.is_game_over;\n        currentGuess = \"\";\n        isProcessing = false;\n\n        // UI æ›´æ–°\n        switchPage('page-game');\n        document.getElementById('level-title').innerText = `LEVEL ${id}`;\n        document.getElementById('hint-btn').onclick = confirmExchange;\n        \n        updateStatusUI(state);\n        renderBoard(config);\n        renderKeyboard();\n        checkGameOverState();\n        \n        // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨\n        setTimeout(() => {\n            const wrapper = document.querySelector('.board-wrapper');\n            if(wrapper) wrapper.scrollTop = wrapper.scrollHeight;\n        }, 50);\n    }\n\n    // 3. æ¸²æŸ“æ£‹ç›˜\n    function renderBoard(levelConfig) {\n        const board = document.getElementById('board');\n        board.innerHTML = '';\n        board.style.gridTemplateColumns = `repeat(1, 1fr)`; // è¡Œå®¹å™¨å æ»¡\n        \n        // A. æ¸²æŸ“å†å²è®°å½•\n        historyData.forEach((record, index) => {\n            const row = createRow(maxLength, record.word, record.colors);\n            // é€šå…³é«˜äº®å¤„ç†\n            if (isCompleted && levelConfig && levelConfig.deepRedCol !== -1) {\n                applyEndGameHighlights(row, record.word, levelConfig); \n            }\n            board.appendChild(row);\n        });\n\n        // B. æ¸²æŸ“å½“å‰è¾“å…¥è¡Œ (å¦‚æœæœªé€šå…³ä¸”æœªç»“æŸ)\n        if (!isCompleted && !isGameOver) {\n            const row = createRow(maxLength, currentGuess, null, true);\n            row.id = \"current-row\";\n            board.appendChild(row);\n        }\n\n        // C. è¡¥é½å‰©ä½™ç©ºè¡Œ (ä¿æŒæ€»è¡Œæ•°ä¸º maxRows)\n        const rowsUsed = historyData.length + (!isCompleted && !isGameOver ? 1 : 0);\n        const rowsToFill = Math.max(0, maxRows - rowsUsed);\n        \n        for(let i=0; i<rowsToFill; i++) {\n            board.appendChild(createRow(maxLength, \"\"));\n        }\n    }\n\n    function createRow(len, word, colors = null, isCurrent = false) {\n        const row = document.createElement('div');\n        row.className = 'row';\n        row.style.gridTemplateColumns = `repeat(${len}, auto)`;\n        row.style.justifyContent = 'center';\n\n        for (let i = 0; i < len; i++) {\n            const tile = document.createElement('div');\n            tile.className = 'tile';\n            \n            const char = word[i] || '';\n            \n            // ã€å…³é”®ä¿®æ”¹ã€‘å¦‚æœæ˜¯ç©ºæ ¼ï¼Œæ˜¾ç¤º 'â£' ç¬¦å·ï¼Œå¹¶åŒ…è£¹ span æ–¹ä¾¿æ ·å¼å¾®è°ƒ\n            if (char === ' ') {\n                tile.innerHTML = '<span class=\"tile-space-symbol\">â£</span>';\n            } else {\n                tile.innerText = char;\n            }\n            \n            // æ·»åŠ é¢œè‰²ç±» (gray/yellow/green)\n            // åªè¦åç«¯è¿”å›äº†é¢œè‰²ï¼ŒCSS å°±ä¼šè®©èƒŒæ™¯å˜è‰²\n            if (colors && colors[i]) {\n                tile.classList.add(colors[i]);\n            }\n\n            // å½“å‰è¾“å…¥è¡Œçš„ç‰¹æ®Šå¤„ç†\n            if (isCurrent) {\n                tile.id = `curr-tile-${i}`;\n                if(char) tile.style.borderColor = \"#666\";\n            }\n            \n            row.appendChild(tile);\n        }\n        return row;\n    }\n\n    // 4. æ›´æ–°å½“å‰è¾“å…¥è¡Œçš„æ˜¾ç¤º\n    function updateCurrentRowDisplay() {\n        for (let i = 0; i < maxLength; i++) {\n            const tile = document.getElementById(`curr-tile-${i}`);\n            if (tile) {\n                const char = currentGuess[i] || '';\n                \n                // ã€åŒæ­¥ä¿®æ”¹ã€‘ç©ºæ ¼æ˜¾ç¤ºé€»è¾‘\n                if (char === ' ') {\n                    tile.innerHTML = '<span class=\"tile-space-symbol\">â£</span>';\n                } else {\n                    tile.innerText = char;\n                }\n\n                tile.style.borderColor = char ? \"#555\" : \"#d3d6da\";\n                if(char) tile.style.animation = \"pop 0.1s ease\";\n            }\n        }\n    }\n\n    // 5. é”®ç›˜è¾“å…¥å¤„ç†\n    function handleInput(char) {\n        // å¦‚æœå¼¹çª—æ‰“å¼€ï¼Œç¦æ­¢è¾“å…¥\n        if (isModalOpen()) return;\n        // å¦‚æœç»“æŸæˆ–å¤„ç†ä¸­ï¼Œç¦æ­¢è¾“å…¥\n        if (isCompleted || isGameOver || isProcessing) return;\n\n        if (currentGuess.length < maxLength) {\n            currentGuess += char;\n            updateCurrentRowDisplay();\n        }\n    }\n\n    function handleBackspace() {\n         if (isModalOpen()) return;\n         if (isCompleted || isGameOver || isProcessing) return;\n\n         if (currentGuess.length > 0) {\n            currentGuess = currentGuess.slice(0, -1);\n            updateCurrentRowDisplay();\n        }\n    }\n\n    // 6. æäº¤çŒœæµ‹\n    async function submitGuess() {\n        if (isModalOpen()) return;\n        if (isProcessing || isCompleted || isGameOver) return;\n        \n        // ç®€å•çš„å‰ç«¯æ ¡éªŒï¼šå¿…é¡»å¡«æ»¡\n        // æ³¨æ„ï¼šåç«¯è¿˜ä¼šå†æ¬¡æ ¡éªŒï¼ˆåŒ…æ‹¬ç©ºæ ¼è§„åˆ™ï¼‰\n        if (currentGuess.length !== maxLength) {\n            showModal(\"æç¤º\", `è¯·å¡«æ»¡ ${maxLength} ä¸ªæ ¼å­`);\n            return;\n        }\n\n        isProcessing = true;\n        \n        // å‘é€ raw æ•°æ® (åŒ…å«å¯èƒ½çš„ç©ºæ ¼)\n        const res = await apiCall({\n            action: 'submit_guess',\n            level_id: currentLevelId,\n            guess: currentGuess \n        });\n        \n        isProcessing = false;\n\n        if (res.success) {\n            // æ›´æ–°çŠ¶æ€\n            livesLeft = res.lives;\n            isCompleted = res.completed;\n            isGameOver = res.is_game_over;\n            \n            historyData.push({ word: currentGuess, colors: res.colors });\n            currentGuess = \"\";\n\n            // è·å–é€šå…³é…ç½®ç”¨äºé«˜äº®\n            const config = res.final_reveal ? { \n                deepRedCol: res.final_reveal.deepRedCol,\n                wordA: res.final_reveal.wordA,\n                wordB: res.final_reveal.wordB\n            } : null;\n            \n            renderBoard(config);\n\n            updateStatusUI({ \n                lives: livesLeft, \n                solved_a: res.solved_a, \n                solved_b: res.solved_b \n            });\n\n            // ç»“æœåé¦ˆ\n            if (isCompleted) {\n                setTimeout(() => showModal(\"æ­å–œ\", \"ğŸ‰ æˆåŠŸé€šå…³ï¼\"), 600);\n            } else if (isGameOver) {\n                checkGameOverState();\n                setTimeout(() => showModal(\"é—æ†¾\", \"çŒœæµ‹æ¬¡æ•°è€—å°½ï¼\\nè¯·ç‚¹å‡»ä¸‹æ–¹çš„çº¢è‰²æŒ‰é’®é‡ç©æœ¬å…³ã€‚\"), 600);\n            }\n            \n            // æ»šåŠ¨\n            const wrapper = document.querySelector('.board-wrapper');\n            if(wrapper) wrapper.scrollTop = wrapper.scrollHeight;\n\n        } else {\n            // åç«¯æ ¡éªŒå¤±è´¥ï¼ˆå¦‚éæ³•å•è¯ã€ç©ºæ ¼ä½ç½®é”™è¯¯ç­‰ï¼‰\n            showModal(\"æç¤º\", res.message);\n        }\n    }\n\n    // 7. æ¸¸æˆç»“æŸçŠ¶æ€æ£€æŸ¥\n    function checkGameOverState() {\n        const restartArea = document.getElementById('restart-area');\n        const keyboard = document.getElementById('keyboard');\n        \n        if (isGameOver && !isCompleted) {\n            // è¾“äº†ï¼šéšè—é”®ç›˜ï¼Œæ˜¾ç¤ºé‡ç½®æŒ‰é’®\n            restartArea.style.display = 'block';\n            keyboard.style.display = 'none';\n        } else {\n            // æ­£å¸¸ï¼šéšè—é‡ç½®æŒ‰é’®ï¼Œæ˜¾ç¤ºé”®ç›˜\n            restartArea.style.display = 'none';\n            keyboard.style.display = 'flex';\n        }\n    }\n\n    // 8. é‡ç½®å…³å¡ (æ¶ˆè€— Life)\n    async function tryRestart() {\n        if (livesLeft <= 0) {\n            showModal(\"æç¤º\", \"æ‚¨çš„æ¸¸ç©æœºä¼šå·²è€—å°½ï¼\\nè¯·ç‚¹å‡»å³ä¸Šè§’ '+' å·ä½¿ç”¨æç¤ºç‚¹è´­ä¹°ã€‚\");\n            return;\n        }\n        \n        showModal(\"ç¡®è®¤é‡ç½®\", `ç¡®å®šæ¶ˆè€— 1 æ¬¡æ¸¸ç©æœºä¼šé‡ç½®æœ¬å…³å—ï¼Ÿ\\n(å½“å‰å‰©ä½™: ${livesLeft})`, true);\n        \n        // ç»‘å®šå¼¹çª—çš„ç¡®è®¤æŒ‰é’®\n        const confirmBtn = document.querySelector('#modal-actions button:last-child');\n        confirmBtn.onclick = async () => {\n            closeModal();\n            const res = await apiCall({ action: 'restart_level', level_id: currentLevelId });\n            \n            if (res.success) {\n                livesLeft = res.lives;\n                historyData = [];\n                isGameOver = false;\n                currentGuess = \"\";\n                \n                updateStatusUI({ lives: livesLeft, solved_a: false, solved_b: false });\n                renderBoard(null);\n                checkGameOverState(); // æ¢å¤é”®ç›˜\n            } else {\n                showModal(\"é”™è¯¯\", res.message);\n            }\n        };\n        confirmBtn.innerText = \"ç¡®è®¤é‡ç½®\";\n    }\n\n    // 9. è´­ä¹°æ¬¡æ•° (å…¨æœ Buff)\n    async function confirmExchange() {\n        if (isCompleted) {\n            showModal(\"æç¤º\", \"æœ¬å…³å·²é€šè¿‡ï¼Œæ— éœ€è´­ä¹°ã€‚\\n(æç¤ºï¼šè´­ä¹°æ“ä½œå¯¹æ‰€æœ‰å…³å¡ç”Ÿæ•ˆ)\");\n            // å³ä½¿é€šå…³ä¹Ÿå…è®¸è´­ä¹°ï¼Œå› ä¸ºæ˜¯å…¨æœå¢åŠ \n            // return; \n        }\n        \n        showModal(\"è¡¥å……æœºä¼š\", \n            `ç¡®å®šæ¶ˆè€— ${hintCost} ä¸ªæç¤ºç‚¹å—ï¼Ÿ\\n\\næ³¨æ„ï¼šè¿™å°†ç»™ **æ‰€æœ‰å…³å¡** éƒ½å¢åŠ  ${attemptsPerBuy} æ¬¡æ¸¸ç©æœºä¼šï¼`, \n            true\n        );\n        \n        const confirmBtn = document.querySelector('#modal-actions button:last-child');\n        confirmBtn.onclick = async () => {\n            closeModal();\n            const res = await apiCall({ action: 'exchange_attempts', level_id: currentLevelId });\n            if (res.success) {\n                livesLeft = res.new_attempts;\n                updateStatusUI({ lives: livesLeft }); \n                showModal(\"æˆåŠŸ\", res.message);\n            } else {\n                showModal(\"å¤±è´¥\", res.message);\n            }\n        };\n        confirmBtn.innerText = \"ç¡®è®¤å…‘æ¢\";\n    }\n\n    // UI æ›´æ–°\n    function updateStatusUI(state) {\n        const attDisplay = document.getElementById('attempts-display');\n        // ä¼˜å…ˆä½¿ç”¨ state.livesï¼Œå¦‚æœæ²¡æœ‰åˆ™ç”¨å…¨å±€å˜é‡\n        const val = (state.lives !== undefined) ? state.lives : livesLeft;\n        attDisplay.innerText = val;\n        attDisplay.style.color = val > 1 ? \"var(--w-green)\" : \"var(--w-deep-red)\";\n\n        const solveDisplay = document.getElementById('solve-status');\n        if (isCompleted) {\n            solveDisplay.innerText = \"â˜… å·²å®Œæˆ â˜…\";\n            solveDisplay.style.color = \"var(--w-green)\";\n        } else {\n            let txt = [];\n            if (state.solved_a !== undefined) {\n                if (state.solved_a) txt.push(\"Aè§£å‡º\");\n                if (state.solved_b) txt.push(\"Bè§£å‡º\");\n                solveDisplay.innerText = txt.length ? txt.join(\" & \") : \"è¿›è¡Œä¸­\";\n                solveDisplay.style.color = \"#555\";\n            }\n        }\n    }\n\n    // é€šå…³é«˜äº®é€»è¾‘\n    function applyEndGameHighlights(rowEl, guessWord, config) {\n        const pad = (w) => (w || \"\").padEnd(maxLength, \" \");\n        const wa = pad(config.wordA);\n        const wb = pad(config.wordB);\n        const redCol = config.deepRedCol;\n\n        const tiles = rowEl.children;\n        for (let i = 0; i < maxLength; i++) {\n            if (i >= tiles.length) break;\n            if (wa[i] === wb[i]) tiles[i].classList.add('col-light-red');\n            if (i === redCol) tiles[i].classList.add('col-deep-red');\n        }\n    }\n\n    // å¼¹çª—é€»è¾‘\n    function showModal(title, msg, isConfirm=false) {\n        document.getElementById('modal-title').innerText = title;\n        document.getElementById('modal-msg').innerText = msg;\n        \n        const actions = document.getElementById('modal-actions');\n        actions.innerHTML = '';\n        \n        // å–æ¶ˆæŒ‰é’® (å·¦)\n        if (isConfirm) {\n            const cancel = document.createElement('button');\n            cancel.className = 'btn-action btn-secondary';\n            cancel.innerText = 'å–æ¶ˆ';\n            cancel.style.background = '#999';\n            cancel.onclick = closeModal;\n            actions.appendChild(cancel);\n        }\n\n        // ç¡®å®š/å…³é—­æŒ‰é’® (å³)\n        const btn = document.createElement('button');\n        btn.className = 'btn-action btn-primary';\n        btn.innerText = isConfirm ? 'ç¡®å®š' : 'å…³é—­';\n        btn.onclick = closeModal;\n        actions.appendChild(btn);\n\n        document.getElementById('overlay').style.display = 'block';\n        document.getElementById('modal').style.display = 'block';\n    }\n\n    function closeModal() {\n        document.getElementById('overlay').style.display = 'none';\n        document.getElementById('modal').style.display = 'none';\n    }\n\n    function showMenu() {\n        initMenu();\n    }\n\n    // æ¸²æŸ“é”®ç›˜\n    function renderKeyboard() {\n        const kbd = document.getElementById('keyboard');\n        kbd.innerHTML = '';\n        const rows = [\"QWERTYUIOP\", \"ASDFGHJKL\", \"ZXCVBNM\"];\n        \n        rows.forEach(rStr => {\n            const rowDiv = document.createElement('div');\n            rowDiv.className = 'key-row';\n            rStr.split('').forEach(char => {\n                const btn = document.createElement('button');\n                btn.className = 'key';\n                btn.innerText = char;\n                btn.onclick = () => handleInput(char);\n                rowDiv.appendChild(btn);\n            });\n            kbd.appendChild(rowDiv);\n        });\n\n        const actionRow = document.createElement('div');\n        actionRow.className = 'key-row';\n        \n        const enter = document.createElement('button');\n        enter.className = 'key wide';\n        enter.innerHTML = 'ENTER';\n        enter.style.background = \"#ddd\";\n        enter.onclick = submitGuess;\n\n        const space = document.createElement('button');\n        space.className = 'key space';\n        space.innerText = 'SPACE';\n        space.onclick = () => handleInput(' ');\n\n        const del = document.createElement('button');\n        del.className = 'key wide';\n        del.innerHTML = 'âŒ«';\n        del.style.background = \"#ddd\";\n        del.onclick = handleBackspace;\n\n        actionRow.appendChild(enter);\n        actionRow.appendChild(space);\n        actionRow.appendChild(del);\n        kbd.appendChild(actionRow);\n    }\n\n    // ç‰©ç†é”®ç›˜ç›‘å¬\n    document.addEventListener('keydown', (e) => {\n        if (!document.getElementById('page-game').classList.contains('active')) return;\n        \n        const k = e.key.toUpperCase();\n\n        // å¼¹çª—æ‰“å¼€æ—¶ï¼ŒEsc/Enter å…³é—­å¼¹çª—ï¼Œç¦æ­¢å…¶ä»–æ“ä½œ\n        if (isModalOpen()) {\n            if (k === 'ENTER' || k === 'ESCAPE') {\n                closeModal();\n                e.preventDefault();\n            }\n            return;\n        }\n\n        // æ¸¸æˆç»“æŸæ—¶ç¦æ­¢ç‰©ç†é”®ç›˜è¾“å…¥\n        if (isGameOver) return;\n\n        if(k === 'ENTER') submitGuess();\n        else if(k === 'BACKSPACE') handleBackspace();\n        else if(k === ' ') handleInput(' ');\n        else if(/^[A-Z]$/.test(k) && k.length === 1) handleInput(k);\n    });\n\n    // å¯åŠ¨\n    initMenu();\n\n</script>\n<p style=\"text-align: center; margin-top: 20px;\">\n    <a href=\"/DMs\" class=\"btn-action btn-secondary\" style=\"font-size: 0.8rem;\">è¿›å…¥ç«™å†…ä¿¡</a>\n</p>\n\n",
  "answer": "BECOMING",
  "desc": "",
  "tips": [
    {
      "title": "è¿™ä¸ªWordleä¼¼ä¹åšä¸å‡ºæ¥ï¼Ÿ (5æç¤ºç‚¹)",
      "content": "åœ¨æœ¬é¢˜ï¼Œç©ºæ ¼è¢«çœ‹æˆç¬¬27ä¸ªå­—æ¯ã€‚"
    },
    {
      "title": "è¿™ä¸ªWordleçš„è§„åˆ™å¥½åƒä¸å¤ªä¸€æ ·ï¼Ÿ (10æç¤ºç‚¹)",
      "content": "å¥‡æ•°è¡Œå’Œå¶æ•°è¡Œå„æ˜¯ä¸€ä¸ªå•è¯ã€‚"
    }
  ],
  "additionalAnswers": [],
  "links": [
    {
      "title": "ç´¢å¼•é¡µ",
      "type": "index",
      "path": "seco2/index"
    },
    {
      "title": "åº„å›­",
      "path": "/area/seco2/1",
      "pgid": 1
    },
    {
      "title": "æ²™æµ·",
      "path": "/area/seco2/2",
      "pgid": 2
    },
    {
      "title": "é«˜å¡”",
      "path": "/area/seco2/3",
      "pgid": 3
    },
    {
      "title": "èŠ±åŸ",
      "path": "/area/seco2/4",
      "pgid": 4
    },
    {
      "title": "æš—æ ¼",
      "path": "/area/seco2/5",
      "pgid": 5
    },
    {
      "title": "è¿‡æ¸¡",
      "path": "/area/seco2/6",
      "pgid": 6
    },
    {
      "title": "ä¸­å¿ƒ",
      "path": "/area/seco2/7",
      "pgid": 7
    },
    {
      "title": "FM",
      "path": "/area/seco2/8",
      "pgid": 8
    }
  ],
  "arealink": {
    "title": "æ²™æµ·",
    "path": "/area/seco2/2",
    "pgid": 2
  }
}